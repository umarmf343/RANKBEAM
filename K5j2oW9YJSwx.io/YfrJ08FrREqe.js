(()=>{let n="https://58qr5yci46.execute-api.us-east-1.amazonaws.com/v1",s=null,d=null;function t(t,e){r.push({command:t,data:e})}var r;window.tolt_referral=null,window.tolt_data=null,window.tolt=window.tolt||(r=[],t.queue=r,t);let c=(e,t)=>{((e,r)=>{let n=0,o=setInterval(()=>{var t=document.querySelectorAll(e);(0<t.length||10<=n)&&(clearInterval(o),0<t.length)&&r(t),n++},500)})({payment_links:t?`a[href^="${t}"], a[href^="https://buy.stripe.com"]`:'a[href^="https://buy.stripe.com"]',pricing_table:"stripe-pricing-table",buy_button:"stripe-buy-button"}[e],t=>{("payment_links"===e?t=>{if(window.tolt_referral&&0<t.length)for(var e=0;e<t.length;e++){var r=t[e];-1===r.href.indexOf("client_reference_id")&&(-1===r.href.indexOf("?")?r.href=r.href+"?client_reference_id="+window.tolt_referral:r.href=r.href+"&client_reference_id="+window.tolt_referral)}}:t=>{if(window.tolt_referral&&0<t.length)for(var e=0;e<t.length;e++){var r=t[e];r.hasAttribute("client-reference-id")||r.setAttribute("client-reference-id",window.tolt_referral)}})(t)})};function u(t,e,r){var n=new Date,r=(n.setTime(n.getTime()+24*r*60*60*1e3),"expires="+n.toUTCString());document.cookie="tolt_referral"===t?`tolt_referral=${e};${r};path=/;domain=${d};samesite=none;secure`:`${t}=${encodeURIComponent(JSON.stringify(e))};${r};path=/;domain=${d};samesite=none;secure`}function w(e){e=("; "+document.cookie).split(`; ${e}=`);if(2===e.length){e=decodeURIComponent(e.pop().split(";").shift());try{return JSON.parse(e)}catch(t){return e}}}async function f(e,t){if(s&&d)try{var r=await(await fetch(n+`/${e}?id=`+window.tolt_referral,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,public_id:s})})).json();return"signup"===e&&r.customer_id&&(window.tolt_data.customer_id=r.customer_id,u("tolt_data",window.tolt_data,30)),r}catch(t){console.error(`API call to ${e} failed:`,t)}else console.warn("Public ID (data-tolt) or domain is missing. API calls will not be made.")}async function p(t,e){switch(t){case"signup":case"conversion":case"clicks":return f(t,e);default:console.warn("Unknown command:",t,e)}}(async()=>{var t,e;t=document.querySelector("script[data-tolt]"),(s=t?t.getAttribute("data-tolt"):null)?(t=async()=>{var t,e;d=(l=window.location.hostname).endsWith(".local")?2<(n=l.split(".")).length?n.slice(-2).join("."):l:"undefined"!=typeof psl&&psl.parse(l).domain||l,w("tolt_referral");if(w("tolt_referral")||w("tolt_data"))window.tolt_referral=w("tolt_referral"),window.tolt_data=w("tolt_data");else{var r,n,o=new URLSearchParams(window.location.search);let t={};for(r of["tolt","ref","aff","via","lmref","fpr","tap_s","afmc","f2f-ref","join","ali"])if(o.has(r)){var i=window.location.href;t={public_id:s,param:r,code:o.get(r),page:i,referrer:document?.referrer};break}0!==Object.keys(t).length&&(n=await f("clicks",t))&&n.click_id&&(l=n.cookie_duration||30,console.log("Referral code:",n.referral),u("tolt_referral",n.referral,l),window.tolt_referral=n.referral,window.tolt_data={click_id:n.click_id||null,cookie_duration:l||null,partner_id:n.partner_id||null,customer_id:n.customer_id||null,program_id:n.program_id||null},u("tolt_data",window.tolt_data,l))}await 0;for({command:t,data:e}of window.tolt.queue||[])await p(t,e);window.tolt.queue=[],await 0,window.tolt=async function(t,e){return p(t,e)},window.tolt.signup=async function(t){var e="signup_"+t;if(window.tolt._signupInProgress&&window.tolt._signupInProgress[e])return console.warn("Signup already in progress for email: "+t),{message:"Signup already in progress"};window.tolt._signupInProgress||(window.tolt._signupInProgress={}),window.tolt._signupInProgress[e]=!0;try{return await p("signup",{email:t,public_id:s})}finally{delete window.tolt._signupInProgress[e]}};var a,l=document.querySelector("script[data-tolt]");l&&l.hasAttribute("data-stripe-type")&&(a=l.getAttribute("data-stripe-type"),l=l.getAttribute("data-stripe-domain"),c(a,l)),document.dispatchEvent(new Event("toltScriptLoaded"))},(e=document.createElement("script")).src="https://0a0objo3eU3Z.net/npm/psl/dist/psl.min.js",e.onload=t,e.onerror=()=>console.error("Failed to load the PSL script"),document.head.appendChild(e)):console.warn("Public ID (data-tolt) is missing. Script initialization aborted.")})()})();